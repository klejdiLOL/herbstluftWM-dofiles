# ~/.config/herbstluftwm/autostart
#!/bin/bash

# autostart
# author: Klejdi Janari (klejdiLOL)
# OpenMandriva
# https://forum.openmandriva.org/
# Location: ~/.config/herbstluftwm/autostart

hc() {
    herbstclient "$@"
}

# === Startup ===
hc emit_hook reload
xsetroot -solid '#11111b'  # fallback background

# Start panels and other stuff
~/.config/polybar/launch.sh &
conky -c ~/.config/conky/conky.conf &
picom &
dex --autostart --environment herbstluftwm &
nm-applet &
xss-lock --transfer-sleep-lock -- i3lock --nofork &
feh --bg-fill /usr/share/wallpapers/default.png &

# === Monitor Setup ===
hc detect_monitors

# === Key Mod ===
Mod=Mod4
hc keyunbind --all
hc mouseunbind --all
hc set_modifier $Mod

# === Workspaces ===
for i in {1..10}; do
    hc add "$i"
done
hc rename default "1"
hc use "1"

# === Focus/Move Bindings ===
binds=(h j k l)
dirs=(left down up right)
for i in "${!binds[@]}"; do
    hc keybind "$Mod-${binds[$i]}" focus "${dirs[$i]}"
    hc keybind "$Mod-Shift-${binds[$i]}" shift "${dirs[$i]}"
done

# === Layouts ===
hc keybind $Mod-space cycle_layout 1
hc load 1 "(split horizontal:0.5:1 (clients max:0) (clients vertical:0))"
hc keybind $Mod-f fullscreen toggle
hc keybind $Mod-Shift-space floating toggle

# === Open Apps ===
hc keybind $Mod-Return spawn kitty
hc keybind $Mod-F2 spawn chromium
hc keybind $Mod-F3 spawn thunar
hc keybind $Mod-F4 spawn ranger
hc keybind $Mod-d spawn "rofi -no-config -no-lazy-grab -show drun -modi drun -theme ~/.config/rofi/rofi/launcher.rasi"
hc keybind $Mod-P spawn ~/.config/rofi/powermenu.sh
hc keybind $Mod-Print spawn mate-screenshot
hc keybind $Mod-Shift-O spawn ./obs/Obs.AppImage

# === Resize Mode (like i3) ===
hc keybind $Mod-r spawn notify-send "Resize Mode is not natively supported, use mouse or set keybinds."

# === Killing Windows ===
hc keybind $Mod-Shift-q close

# === Reload / Quit HerbstluftWM ===
hc keybind $Mod-Shift-c reload
hc keybind $Mod-Shift-r spawn herbstclient reload
hc keybind $Mod-Shift-e spawn "herbstclient quit"

# === Workspace Bindings ===
for i in {1..10}; do
    hc keybind "$Mod-$i" use "$i"
    hc keybind "$Mod-Shift-$i" move "$i"
done

# === Window Appearance ===
hc set frame_border_active_color '#E2266E'
hc set frame_border_normal_color '#6c7086'
hc set frame_border_width 2
hc set window_border_width 4
hc set window_border_active_color '#2080BB'
hc set window_border_normal_color '#6c7086'

# === Gaps ===
hc set window_gap 10
hc set frame_padding 0

# === Work Mode Toggle (autotiling idea) ===
hc keybind $Mod-w spawn "herbstclient cycle_layout +1"

# === Focus Floating/Tiled ===
hc keybind $Mod-t spawn "herbstclient bring"

# === Quirks / Extras ===
hc set tree_style '╾│ ├└╼─┐'

# === Mouse binds ===
hc mousebind $Mod-Button1 move
hc mousebind $Mod-Button2 zoom
hc mousebind $Mod-Button3 resize
